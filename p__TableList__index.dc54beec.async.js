"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[325],{89938:function(fe,T,t){t.r(T),t.d(T,{default:function(){return ie}});var V=t(97857),Z=t.n(V),W=t(13769),G=t.n(W),z=t(5574),j=t.n(z),N=t(15009),d=t.n(N),Y=t(99289),v=t.n(Y),b=t(51042),K=t(6110),H=t(28490),J=t(2236),Q=t(37476),A=t(5966),w=t(90672),X=t(20040),he=t(80854),k=t(55102),C=t(14726),q=t(85265),f=t(67294),y=t(45029),F=t(64317),_=t(86615),ee=t(22452),te=t(28248),e=t(85893),ne=function(l){return(0,e.jsxs)(y.L0,{stepsProps:{size:"small"},stepsFormRender:function(S,s){return(0,e.jsx)(te.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",open:l.updateModalOpen,footer:s,onCancel:function(){l.onCancel()},children:S})},onFinish:l.onSubmit,children:[(0,e.jsxs)(y.L0.StepForm,{initialValues:{name:l.values.name,desc:l.values.desc},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,e.jsx)(A.Z,{name:"name",label:"\u89C4\u5219\u540D\u79F0",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,e.jsx)(w.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,e.jsxs)(y.L0.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,e.jsx)(F.Z,{name:"target",width:"md",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(F.Z,{name:"template",width:"md",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(_.Z.Group,{name:"type",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(y.L0.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,e.jsx)(ee.Z,{name:"time",width:"md",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,e.jsx)(F.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},ae=ne,re=["defaultRender"],le=function(l){return l},se=function(){var h=v()(d()().mark(function l(c){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",c);case 1:case"end":return s.stop()}},l)}));return function(c){return h.apply(this,arguments)}}(),ue=function(){var h=v()(d()().mark(function l(c){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",c);case 1:case"end":return s.stop()}},l)}));return function(c){return h.apply(this,arguments)}}(),de=function(){var l=(0,f.useState)(!1),c=j()(l,2),S=c[0],s=c[1],I=(0,f.useState)(!1),P=j()(I,2),oe=P[0],R=P[1],ce=(0,f.useState)(!1),B=j()(ce,2),E=B[0],O=B[1],p=(0,f.useRef)(),me=(0,f.useState)(),$=j()(me,2),i=$[0],g=$[1],ve=(0,f.useState)([]),D=j()(ve,2),x=D[0],L=D[1],M=[{title:"\u89C4\u5219\u540D\u79F0",dataIndex:"name",tip:"The rule name is the unique key",render:function(n,a){return(0,e.jsx)("a",{onClick:function(){g(a),O(!0)},children:n})}},{title:"\u63CF\u8FF0",dataIndex:"desc",valueType:"textarea"},{title:"\u670D\u52A1\u8C03\u7528\u6B21\u6570",dataIndex:"callNo",sorter:!0,hideInForm:!0,renderText:function(n){return"".concat(n,"\u4E07")}},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u8FD0\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u4E0A\u7EBF",status:"Success"},3:{text:"\u5F02\u5E38",status:"Error"}}},{title:"\u4E0A\u6B21\u8C03\u5EA6\u65F6\u95F4",sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:function(n,a,o){var m=a.defaultRender,u=G()(a,re),U=o.getFieldValue("status");return"".concat(U)==="0"?!1:"".concat(U)==="3"?(0,e.jsx)(k.Z,Z()(Z()({},u),{},{placeholder:"\u8BF7\u8F93\u5165\u5F02\u5E38\u539F\u56E0\uFF01"})):m(n)}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(n,a){return[(0,e.jsx)("a",{onClick:function(){R(!0),g(a)},children:"\u914D\u7F6E"},"config"),(0,e.jsx)("a",{href:"https://procomponents.ant.design/",children:"\u8BA2\u9605\u8B66\u62A5"},"subscribeAlert")]}}];return(0,e.jsxs)(K._z,{children:[(0,e.jsx)(H.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:p,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(C.ZP,{type:"primary",onClick:function(){s(!0)},children:[(0,e.jsx)(b.Z,{})," \u65B0\u5EFA"]},"primary")]},columns:M,rowSelection:{onChange:function(n,a){L(a)}}}),(x==null?void 0:x.length)>0&&(0,e.jsxs)(J.S,{extra:(0,e.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,e.jsx)("a",{style:{fontWeight:600},children:x.length})," ","\u9879 \xA0\xA0",(0,e.jsxs)("span",{children:["\u670D\u52A1\u8C03\u7528\u6B21\u6570\u603B\u8BA1 ",x.reduce(function(r,n){return r+n.callNo},0)," \u4E07"]})]}),children:[(0,e.jsx)(C.ZP,{onClick:v()(d()().mark(function r(){var n,a;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,ue(x);case 2:L([]),(n=p.current)===null||n===void 0||(a=n.reloadAndRest)===null||a===void 0||a.call(n);case 4:case"end":return m.stop()}},r)})),children:"\u6279\u91CF\u5220\u9664"}),(0,e.jsx)(C.ZP,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,e.jsxs)(Q.Y,{title:"\u65B0\u5EFA\u89C4\u5219",width:"400px",open:S,onOpenChange:s,onFinish:function(){var r=v()(d()().mark(function n(a){var o;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,le(a);case 2:o=u.sent,o&&(s(!1),p.current&&p.current.reload());case 4:case"end":return u.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),children:[(0,e.jsx)(A.Z,{rules:[{required:!0,message:"\u89C4\u5219\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"name"}),(0,e.jsx)(w.Z,{width:"md",name:"desc"})]}),(0,e.jsx)(ae,{onSubmit:function(){var r=v()(d()().mark(function n(a){var o;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,se(a);case 2:o=u.sent,o&&(R(!1),g(void 0),p.current&&p.current.reload());case 4:case"end":return u.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),onCancel:function(){R(!1),E||g(void 0)},updateModalOpen:oe,values:i||{}}),(0,e.jsx)(q.Z,{width:600,open:E,onClose:function(){g(void 0),O(!1)},closable:!1,children:(i==null?void 0:i.name)&&(0,e.jsx)(X.vY,{column:2,title:i==null?void 0:i.name,request:v()(d()().mark(function r(){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{data:i||{}});case 1:case"end":return a.stop()}},r)})),params:{id:i==null?void 0:i.name},columns:M})})]})},ie=de}}]);
